# –ì–∞–π–¥ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é /reset

## üîç –ü—Ä–æ–±–ª–µ–º–∞
–ö–æ–º–∞–Ω–¥–∞ `/reset` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É –±–µ–∑ –¥–µ—Ç–∞–ª–µ–π.

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ
1. –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `/reset`
2. –¢–µ–ø–µ—Ä—å –±–æ—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–∏–ø –æ—à–∏–±–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
3. –ü–æ–ª–Ω—ã–π traceback –ø–∏—à–µ—Ç—Å—è –≤ –ª–æ–≥–∏

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ –±–æ—Ç–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–û—Ç–ø—Ä–∞–≤–∏—Ç—å `/reset` –±–æ—Ç—É –°–ï–ô–ß–ê–°**
2. **–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—Ç–≤–µ—Ç** - —Ç–µ–ø–µ—Ä—å –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–∏–ø –æ—à–∏–±–∫–∏
3. **–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏:**
   ```bash
   cd ~/Projects/youtravel_bot
   railway logs --lines 100
   ```
   
   –ù–∞–π—Ç–∏ —Å—Ç—Ä–æ–∫–∏:
   ```
   User XXXXX requested reset
   ‚ùå Error resetting user
   ```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ SQL –Ω–∞ Railway

1. Railway Dashboard ‚Üí PostgreSQL service
2. Data tab ‚Üí Query
3. –í—ã–ø–æ–ª–Ω–∏—Ç—å:
   ```sql
   -- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   SELECT telegram_id, username, email, inn, promo_code 
   FROM users 
   ORDER BY created_at DESC;
   
   -- –£–¥–∞–ª–∏—Ç—å —Å–≤–æ—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é (–∑–∞–º–µ–Ω–∏—Ç–µ YOUR_ID –Ω–∞ –≤–∞—à telegram_id –∏–∑ –∑–∞–ø—Ä–æ—Å–∞ –≤—ã—à–µ)
   DELETE FROM users WHERE telegram_id = YOUR_TELEGRAM_ID;
   ```

4. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ `/start` –≤ –±–æ—Ç–µ –¥–ª—è –Ω–æ–≤–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

## üéØ –ï—Å–ª–∏ —Å–Ω–æ–≤–∞ –æ—à–∏–±–∫–∞

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ `/reset` –∏ —Å—Ä–∞–∑—É –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```bash
cd ~/Projects/youtravel_bot
railway logs --lines 200 | grep -A 20 "reset"
```

–ò–ª–∏ –ø–æ–∫–∞–∂–∏—Ç–µ –º–Ω–µ:
1. –¢–æ—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –±–æ—Ç–∞
2. –í—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã –≤—ã—à–µ

## üìã –í–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏

### `AttributeError: 'NoneType' object has no attribute 'pool'`
**–ü—Ä–∏—á–∏–Ω–∞**: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `DATABASE_URL` –Ω–∞ Railway

### `asyncpg.exceptions.UndefinedTableError: relation "users" does not exist`
**–ü—Ä–∏—á–∏–Ω–∞**: –¢–∞–±–ª–∏—Ü–∞ –Ω–µ —Å–æ–∑–¥–∞–Ω–∞
**–†–µ—à–µ–Ω–∏–µ**: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç (Railway restart)

### `asyncpg.exceptions.InsufficientPrivilegeError`
**–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤ –¥–ª—è DELETE
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ë–î

## üîß –ë—ã—Å—Ç—Ä—ã–π —Ñ–∏–∫—Å

–ï—Å–ª–∏ `/reset` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–æ–æ–±—â–µ, –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ:
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SQL (—Å–º. –í–∞—Ä–∏–∞–Ω—Ç 2 –≤—ã—à–µ)
2. –ò–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –≤ `/start`:
   ```python
   # if user and user.get('completed_at'):
   #     # ... –≤–µ—Ä–Ω—É—Ç—å —Å—Ç–∞—Ä—ã–π –ø—Ä–æ–º–æ–∫–æ–¥
   #     return
   ```
   –¢–æ–≥–¥–∞ –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –Ω–∞—á–∞—Ç—å `/start` –∑–∞–Ω–æ–≤–æ

