# üö® –°–†–û–ß–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –≤—ã–¥–∞—á–∞ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤

## –ß—Ç–æ –ø—Ä–æ–∏–∑–æ—à–ª–æ

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:** nzamaldinova@gmail.com (ID: 2200122)  
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª—É—á–∏–ª 4 –ø—Ä–æ–º–æ–∫–æ–¥–∞ –≤–º–µ—Å—Ç–æ 1  
**–í—Ä–µ–º—è:** 09.10.2025, 11:46 - 11:51 (5 –º–∏–Ω—É—Ç)  
**–ú–∞—Å—à—Ç–∞–±:** 10 –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ "used" –≤ Google Sheets

### –°–ø–∏—Å–æ–∫ –ø–æ—Å—Ç—Ä–∞–¥–∞–≤—à–∏—Ö –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤:

1. ‚úÖ **YOUTRAVELGDLWN7IKDV** - –ø–µ—Ä–≤—ã–π –≤—ã–¥–∞–Ω–Ω—ã–π, –æ—Å—Ç–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
2. ‚ùå YOUTRAVELBRGJJ77O22 - –Ω–µ –ø–æ–Ω—è—Ç–Ω–æ –∫–æ–º—É –≤—ã–¥–∞–Ω
3. ‚ùå YOUTRAVELOB4VD2YBL7 - –Ω–µ –ø–æ–Ω—è—Ç–Ω–æ –∫–æ–º—É –≤—ã–¥–∞–Ω  
4. ‚ùå YOUTRAVELBVHEW48XL7 - –Ω–µ –ø–æ–Ω—è—Ç–Ω–æ –∫–æ–º—É –≤—ã–¥–∞–Ω
5. ‚ùå YOUTRAVELPXP5N77LH7 - –Ω–µ –ø–æ–Ω—è—Ç–Ω–æ –∫–æ–º—É –≤—ã–¥–∞–Ω
6. ‚ùå YOUTRAVELLBXZL6T3G3 - –Ω–µ –ø–æ–Ω—è—Ç–Ω–æ –∫–æ–º—É –≤—ã–¥–∞–Ω
7. ‚ùå YOUTRAVELCME4IAZJU6 - –≤—ã–¥–∞–Ω nzamaldinova@gmail.com (–¥—É–±–ª–∏–∫–∞—Ç)
8. ‚ùå YOUTRAVELOZ3DZVJ7NQ - –≤—ã–¥–∞–Ω nzamaldinova@gmail.com (–¥—É–±–ª–∏–∫–∞—Ç)
9. ‚ùå YOUTRAVELJFUHCYBOZT - –≤—ã–¥–∞–Ω nzamaldinova@gmail.com (–¥—É–±–ª–∏–∫–∞—Ç)
10. ‚ÑπÔ∏è YOUTRAVELTEST1 - —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–º–æ–∫–æ–¥ (07.10.2025)

## –ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–≥ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –Ω–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "‚úÖ –î–∞, –≤—Å—ë –≤–µ—Ä–Ω–æ"
2. `callback.answer()` –≤—ã–∑—ã–≤–∞–ª—Å—è —Å–ª–∏—à–∫–æ–º –ø–æ–∑–¥–Ω–æ ‚Üí —Ç–∞–π–º–∞—É—Ç—ã
3. –ù–µ –±—ã–ª–æ –∑–∞—â–∏—Ç—ã –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
4. –ü—Ä–∏ –æ—à–∏–±–∫–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è `edit_text` –≤–º–µ—Å—Ç–æ `answer`

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (da43507):
1. ‚úÖ `callback.answer()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ "—É–∂–µ –∑–∞–≤–µ—Ä—à–∏–ª —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é"
3. ‚úÖ Fallback —á–µ—Ä–µ–∑ `answer()` –≤–º–µ—Å—Ç–æ `edit_text()`
4. ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫–Ω–æ–ø–∫–∞–º–∏

## –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### ‚ö° –≠–¢–ê–ü 1: –ê–Ω–∞–ª–∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∞–Ω–∞–ª–∏–∑–∞ —á–µ—Ä–µ–∑ Railway CLI:

```bash
railway run python analyze_promo_issue.py
```

–≠—Ç–æ –ø–æ–∫–∞–∂–µ—Ç:
- –°–∫–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–µ–π –≤ –ë–î –¥–ª—è nzamaldinova@gmail.com
- –ö–∞–∫–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã —Ä–µ–∞–ª—å–Ω–æ –≤—ã–¥–∞–Ω—ã
- –ï—Å—Ç—å –ª–∏ –¥—Ä—É–≥–∏–µ –ø–æ—Å—Ç—Ä–∞–¥–∞–≤—à–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

### üîß –≠–¢–ê–ü 2: –û—á–∏—Å—Ç–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–û–ø—Ü–∏—è –ê: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**

```bash
railway run python fix_nzamaldinova_duplicates.py
```

–°–∫—Ä–∏–ø—Ç:
- –ù–∞–π–¥–µ—Ç –≤—Å–µ –∑–∞–ø–∏—Å–∏ –¥–ª—è nzamaldinova@gmail.com
- –û—Å—Ç–∞–≤–∏—Ç —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—É—é (—Å –ò–ù–ù –∏ –ø–µ—Ä–≤—ã–º –ø—Ä–æ–º–æ–∫–æ–¥–æ–º)
- –£–¥–∞–ª–∏—Ç –æ—Å—Ç–∞–ª—å–Ω—ã–µ
- –í—ã–≤–µ–¥–µ—Ç —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è

**–û–ø—Ü–∏—è –ë: –†—É—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —á–µ—Ä–µ–∑ Railway shell**

```bash
railway run bash
psql $DATABASE_URL
```

```sql
-- 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–ø–∏—Å–∏
SELECT user_id, email, inn, promo_code, created_at 
FROM users 
WHERE email = 'nzamaldinova@gmail.com' 
ORDER BY created_at;

-- 2. –£–¥–∞–ª—è–µ–º –¥—É–±–ª–∏–∫–∞—Ç—ã (–æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—É—é –∑–∞–ø–∏—Å—å)
DELETE FROM users 
WHERE email = 'nzamaldinova@gmail.com' 
AND user_id != (
    SELECT user_id 
    FROM users 
    WHERE email = 'nzamaldinova@gmail.com' 
    AND inn IS NOT NULL 
    ORDER BY created_at 
    LIMIT 1
);

-- 3. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
SELECT * FROM users WHERE email = 'nzamaldinova@gmail.com';
```

### üìä –≠–¢–ê–ü 3: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Google Sheets

#### –¢–∞–±–ª–∏—Ü–∞ "Registered Users"

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://docs.google.com/spreadsheets/d/1xBFSvBBdKG27YAAfjMy6K0dEcFP4pQMUujpblK8tub0/edit#gid=0
2. –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏ —Å `nzamaldinova@gmail.com`
3. **–£–¥–∞–ª–∏—Ç–µ –¥—É–±–ª–∏–∫–∞—Ç—ã**, –æ—Å—Ç–∞–≤—å—Ç–µ —Ç–æ–ª—å–∫–æ:
   ```
   Email: nzamaldinova@gmail.com
   –ò–ù–ù: 7718718506
   –ü—Ä–æ–º–æ–∫–æ–¥: YOUTRAVELGDLWN7IKDV
   –î–∞—Ç–∞: 09.10.2025 11:48
   ```

#### –¢–∞–±–ª–∏—Ü–∞ "Promos"

–û—Ç–∫—Ä–æ–π—Ç–µ –ª–∏—Å—Ç "Promos" –∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–º–æ–∫–æ–¥–∞ –∏–∑ —Å–ø–∏—Å–∫–∞ –Ω–∏–∂–µ:

**–ü—Ä–æ–º–æ–∫–æ–¥—ã –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è:**

1. YOUTRAVELCME4IAZJU6
2. YOUTRAVELOZ3DZVJ7NQ
3. YOUTRAVELJFUHCYBOZT
4. YOUTRAVELBRGJJ77O22
5. YOUTRAVELOB4VD2YBL7
6. YOUTRAVELBVHEW48XL7
7. YOUTRAVELPXP5N77LH7
8. YOUTRAVELLBXZL6T3G3

**–î–ª—è –∫–∞–∂–¥–æ–≥–æ:**
- –ö–æ–ª–æ–Ω–∫–∞ "–°—Ç–∞—Ç—É—Å": –∏–∑–º–µ–Ω–∏—Ç–µ `used` ‚Üí `available`
- –ö–æ–ª–æ–Ω–∫–∞ "–î–∞—Ç–∞ –≤—ã–¥–∞—á–∏": –æ—á–∏—Å—Ç–∏—Ç–µ —è—á–µ–π–∫—É (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—É—Å—Ç–æ–π)

### üí¨ –≠–¢–ê–ü 4: –°–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

–û—Ç–ø—Ä–∞–≤—å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —á–µ—Ä–µ–∑ –±–æ—Ç –∏–ª–∏ –Ω–∞–ø—Ä—è–º—É—é:

```
–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!

–í–æ –≤—Ä–µ–º—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞, –∏ —Å–∏—Å—Ç–µ–º–∞ –≤—ã–¥–∞–ª–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤. 

‚úÖ –í–∞—à –¥–µ–π—Å—Ç–≤—É—é—â–∏–π –ø—Ä–æ–º–æ–∫–æ–¥: YOUTRAVELGDLWN7IKDV

–û–Ω —É–∂–µ –∞–∫—Ç–∏–≤–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –ü—Ä–æ–º–æ–∫–æ–¥ –¥–∞—ë—Ç ‚àí10% (–¥–æ 10 000 ‚ÇΩ) –Ω–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –Ø–Ω–¥–µ–∫—Å.–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è—Ö –¥–æ 10 –Ω–æ—è–±—Ä—è 2025.

–ü—Ä–∏–Ω–æ—Å–∏–º –∏–∑–≤–∏–Ω–µ–Ω–∏—è –∑–∞ –Ω–µ—É–¥–æ–±—Å—Ç–≤–∞. –ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –≤–æ–ø—Ä–æ—Å—ã, –Ω–∞–ø–∏—à–∏—Ç–µ @maria_youtravel
```

### ‚úÖ –≠–¢–ê–ü 5: –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –≤—Å–µ—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —á–µ—Ä–µ–∑ –±–æ—Ç–∞:

1. `/admin_stats` - –¥–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
2. `/admin_users` - –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –∑–∞–ø–∏—Å—å –¥–ª—è nzamaldinova@gmail.com
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è - —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –Ω–µ–ª—å–∑—è –ø–æ–ª—É—á–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤

## –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

### –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã
```bash
railway run python analyze_promo_issue.py
```

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
```bash
railway run python fix_nzamaldinova_duplicates.py
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
–í Telegram –±–æ—Ç–µ:
```
/admin_stats
/admin_users
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏ Railway
```bash
railway logs --lines 100
```

### –ß—Ç–æ –∏—Å–∫–∞—Ç—å –≤ –ª–æ–≥–∞—Ö:
- ‚úÖ `User already completed registration` - –∑–∞—â–∏—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ùå `query is too old` - —Ç–∞–π–º–∞—É—Ç—ã (–Ω–µ –¥–æ–ª–∂–Ω–æ –±–æ–ª—å—à–µ –±—ã—Ç—å)
- ‚ùå –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ `completed registration with promo` –¥–ª—è –æ–¥–Ω–æ–≥–æ user_id

## –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –≤ –±—É–¥—É—â–µ–º

### ‚úÖ –£–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–¥–µ (da43507):
1. –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–π `callback.answer()`
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
3. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π fallback –±–µ–∑ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
4. Try-catch –¥–ª—è –≤—Å–µ—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### üîç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞—â–∏—Ç–∞ (TODO):
1. Rate limiting –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∫–Ω–æ–ø–∫–∏ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∫–ª–∏–∫–∞
3. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø—Ä–∏ –≤—ã–¥–∞—á–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞
4. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ø—ã—Ç–æ–∫ –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–æ–º–æ–∫–æ–¥–∞

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫

- [ ] –ó–∞–ø—É—â–µ–Ω `analyze_promo_issue.py`
- [ ] –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- [ ] –ó–∞–ø—É—â–µ–Ω `fix_nzamaldinova_duplicates.py` –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —Ä—É—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –ë–î
- [ ] –£–¥–∞–ª–µ–Ω—ã –¥—É–±–ª–∏–∫–∞—Ç—ã –≤ Google Sheets ‚Üí "Registered Users"
- [ ] –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–æ–º–æ–∫–æ–¥—ã –≤ Google Sheets ‚Üí "Promos"
- [ ] –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ —á–µ—Ä–µ–∑ `/admin_stats` –∏ `/admin_users`
- [ ] –ü—Ä–æ–≤–µ–¥–µ–Ω–∞ —Ç–µ—Å—Ç–æ–≤–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –ª–æ–≥–∏ Railway

## –í–æ–ø—Ä–æ—Å—ã –∏ –ø–æ–º–æ—â—å

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `railway logs --lines 100`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ë–î: `railway run python analyze_promo_issue.py`
3. –°–≤—è–∂–∏—Ç–µ—Å—å —Å @maria_youtravel –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

